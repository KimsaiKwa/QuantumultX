version: '3.3'

services:
    rsshub:
        # two ways to enable puppeteer:
        # * comment out marked lines, then use this image instead: diygod/rsshub:chromium-bundled
        # * (consumes more disk space and memory) leave everything unchanged
        image: diygod/rsshub
        restart: always
        ports:
            - '1200:1200'
        environment:
            NODE_ENV: production
            CACHE_TYPE: redis
            REDIS_URL: 'redis://redis:6379/'
            PUPPETEER_WS_ENDPOINT: 'ws://browserless:3000'  # marked
            
            IG_USERNAME: KimshineChecked
            IG_PASSWORD: CrbyQdQ3EXsMeDiq
            YOUTUBE_KEY: AIzaSyA5iG40KruL6BX_vAG13_t1Dwlt7ZTk0RE
            
            BILIBILI_COOKIE_122945880: hit-dyn-v2=1; DedeUserID=122945880; DedeUserID__ckMd5=a6a61149b6ffe115; buvid3=DCD33875-708D-62B1-6B03-74E41F07F98424028infoc; b_nut=1666247724; i-wanna-go-back=-1; b_ut=5; nostalgia_conf=-1; CURRENT_QUALITY=80; _uuid=E21078A98-1FD1-B1CD-4318-539382C1556676652infoc; buvid4=3A9B4ACD-1D57-378C-7D6D-7BDA14F9FBF177841-022102510-Tt9sk1Z547fL0fpXQdWsIA==; fingerprint3=ab07e795876112b8508110edb5835d1c; LIVE_BUVID=AUTO1216672215071180; hit-new-style-dyn=0; CURRENT_FNVAL=4048; buvid_fp_plain=undefined; SESSDATA=cfbdd19b,1685003963,81ba2*b2; bili_jct=cbb73d19127fc6fd9960936e225d8b73; rpdid=|(umu)|mYRlu0J'uYYmY))Y~~; fingerprint=0c89e17b1e6b032baa81bdd093291932; buvid_fp=cad471c72c0e815de73f48bb7949d31e; bp_video_offset_122945880=769445508729012200; sid=hmps4qpp; b_lsid=231CD95D_1870DF0BD76
            NEWRANK_COOKIE: D76DC133CBE141B78273638AE053ED26
            
        depends_on:
            - redis
            - browserless  # marked

    browserless:  # marked
        image: browserless/chrome  # marked
        restart: always  # marked
        ulimits:  # marked
          core:  # marked
            hard: 0  # marked
            soft: 0  # marked

    redis:
        image: redis:alpine
        restart: always
        volumes:
            - redis-data:/data


    alist:
        image: 'xhofe/alist:latest'   
        restart: always
        volumes:
            - '/etc/alist:/opt/alist/data'
        ports:
            - '5244:5244'
        environment:
            - PUID=0
            - PGID=0
            - UMASK=022
        container_name: alist
         

    aliyundrive-subscribe:
        image: 'looby/aliyundrive-subscribe:latest'
        restart: unless-stopped 
        volumes:
            - '/etc/alisub:/opt/alisub/conf' #：左侧修改成自己的目录，在conf 目录下创建app.ini，app.ini 按照要求填写初始化信息就好
        ports:
            - '8002:8002'
        container_name: alisub            
        
        
volumes:
    redis-data:
